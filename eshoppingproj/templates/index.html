{% extends  'base.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

</head>
<body>
{% block body_block %}

    <div class="container ">
        <h2 align="center"><i><u>Electronic Products</u> </i> </h2>
   {% for i in products|slice:"0:8" %}

<div class='col-md-3'>
&nbsp
  <div class="card" style="width: 202px; " >
    <img class="card-img-top" src="/media/{{ i.image }}" alt="Card image" style="width:200px;height: 160px;">
    <div class="card-body" style="background-color: blue;">
      <h3 class="card-title" id="namepr{{ i.id }}" ><b>{{ i.product_name }}</b></h3>
      <p class="card-text" style="color: white;">{{ i.desc|slice:"0:40" }} </p>
        <h6 class="card-title" style="color: black;" >Price <span id="priipr{{ i.id }}"><b>{{ i.prii }}</b></span></h6>
        <span id="divpr{{ i.id }}" class="divpr">
       <button id="pr{{ i.id }}" class="btn btn-danger cart" >Add to cart</button>
        </span>
            <a href="/shop/product/{{ i.id }}" ><button id="qv{{ i.id }}" class="btn btn-danger  " > View</button></a>

    </div>
  </div>
  </div>


{% endfor %}
    </div>


    <div class="container">
        <h2 align="center"><u><i>Fashion Products</i> </u> </h2>
   {% for i in products|slice:"8:16" %}

<div class='col-md-3'>
&nbsp
  <div class="card" style="width: 202px" >
    <img class="card-img-top" src="/media/{{ i.image }}" alt="Card image" style="width:200px;height: 160px;">
    <div class="card-body" style="background-color: blue;">
      <h3 class="card-title" id="namepr{{ i.id }}" ><b>{{ i.product_name }}</b></h3>
      <p class="card-text" style="color: white;">{{ i.desc|slice:"0:40" }} </p>
        <h6 class="card-title" style="color: black;" >Price <span id="priipr{{ i.id }}"><b>{{ i.prii }}</b></span></h6>
        <span id="divpr{{ i.id }}" class="divpr">
       <button id="pr{{ i.id }}" class="btn btn-danger cart" >Add to cart</button>
        </span>
            <a href="/shop/product/{{ i.id }}" ><button id="qv{{ i.id }}" class="btn btn-danger  " > View</button></a>

    </div>
  </div>
  </div>
{% endfor %}
    </div>

    <div class="container">
 <h2 align="center"><i><u>Stylies Shoes</u></i>  </h2>
     {% for i in products|slice:"16:24" %}

<div class='col-md-3'>
&nbsp
  <div class="card" style="width: 202px" >
    <img class="card-img-top" src="/media/{{ i.image }}" alt="Card image" style="width:200px;height: 160px;">
    <div class="card-body" style="background-color: blue;">
      <h3 class="card-title" id="namepr{{ i.id }}" ><b>{{ i.product_name }}</b></h3>
      <p class="card-text" style="color: white;">{{ i.desc|slice:"0:40" }} </p>
        <h6 class="card-title" style="color: black;" >Price <span id="priipr{{ i.id }}"><b>{{ i.prii }}</b></span></h6>
        <span id="divpr{{ i.id }}" class="divpr">
       <button id="pr{{ i.id }}" class="btn btn-danger cart" >Add to cart</button>
        </span>
            <a href="/shop/product/{{ i.id }}" ><button id="qv{{ i.id }}" class="btn btn-danger  " > View</button></a>

    </div>
  </div>
  </div>

{% endfor %}
 </div>

    <div class="container">
 <h2 align="center"><i><u>Stylies Slipers</u></i>  </h2>
     {% for i in products|slice:"24:32" %}

<div class='col-md-3'>
&nbsp
  <div class="card" style="width: 202px" >
    <img class="card-img-top" src="/media/{{ i.image }}" alt="Card image" style="width:200px;height: 160px;">
    <div class="card-body" style="background-color: blue;">
      <h3 class="card-title" id="namepr{{ i.id }}" ><b>{{ i.product_name }}</b></h3>
      <p class="card-text" style="color: white;">{{ i.desc|slice:"0:40" }} </p>
        <h6 class="card-title" style="color: black;">Price <span id="priipr{{ i.id }}"><b>{{ i.prii }}</b></span></h6>
        <span id="divpr{{ i.id }}" class="divpr">
       <button id="pr{{ i.id }}" class="btn btn-danger cart" >Add to cart</button>
        </span>
            <a href="/shop/product/{{ i.id }}" ><button id="qv{{ i.id }}" class="btn btn-danger  " > View</button></a>

    </div>
  </div>
  </div>

{% endfor %}
 </div>

    <div class="container">
<h2 align="center"><i><u>Stylies Girls Bags</u></i>  </h2>
     {% for i in products|slice:"32:40" %}

<div class='col-md-3'>
&nbsp
  <div class="card" style="width: 202px" >
    <img class="card-img-top" src="/media/{{ i.image }}" alt="Card image" style="width:200px;height: 160px;">
    <div class="card-body" style="background-color: blue;">
      <h3 class="card-title" id="namepr{{ i.id }}" ><b>{{ i.product_name }}</b></h3>
      <p class="card-text" style="color: white;">{{ i.desc|slice:"0:40" }} </p>
        <h6 class="card-title" style="color: black;">Price <span id="priipr{{ i.id }}"><b>{{ i.prii }}</b></span></h6>
        <span id="divpr{{ i.id }}" class="divpr">
       <button id="pr{{ i.id }}" class="btn btn-danger cart" >Add to cart</button>
        </span>
            <a href="/shop/product/{{ i.id }}" ><button id="qv{{ i.id }}" class="btn btn-danger  " > View</button></a>

    </div>
  </div>
  </div>

{% endfor %}
 </div>
    <div class="container">
<h2 align="center"><i><u>Stylies Girls Top</u></i>  </h2>
     {% for i in products|slice:"40:48" %}

<div class='col-md-3'>
&nbsp
  <div class="card" style="width: 202px" >
    <img class="card-img-top" src="/media/{{ i.image }}" alt="Card image" style="width:200px;height: 160px;">
    <div class="card-body" style="background-color: blue;">
      <h3 class="card-title" id="namepr{{ i.id }}" ><b>{{ i.product_name }}</b></h3>
      <p class="card-text" style="color: white;">{{ i.desc|slice:"0:40" }} </p>
        <h6 class="card-title" style="color:black ;">Price <span id="priipr{{ i.id }}"><b>{{ i.prii }}</b></span></h6>
        <span id="divpr{{ i.id }}" class="divpr">
       <button id="pr{{ i.id }}" class="btn btn-danger cart" >Add to cart</button>
        </span>
            <a href="/shop/product/{{ i.id }}" ><button id="qv{{ i.id }}" class="btn btn-danger  " > View</button></a>

    </div>
  </div>
  </div>

{% endfor %}
 </div>

    <div class="container">
<h2 align="center"><i><u>Stylies Boys Jeans</u></i>  </h2>
     {% for i in products|slice:"48:56" %}

<div class='col-md-3'>
&nbsp
  <div class="card" style="width: 202px" >
    <img class="card-img-top" src="/media/{{ i.image }}" alt="Card image" style="width:200px;height: 160px;">
    <div class="card-body" style="background-color: blue;">
      <h3 class="card-title" id="namepr{{ i.id }}" ><b>{{ i.product_name }}</b></h3>
      <p class="card-text" style="color: white;">{{ i.desc|slice:"0:40" }} </p>
        <h6 class="card-title" style="color: black;">Price <span id="priipr{{ i.id }}"><b>{{ i.prii }}</b></span></h6>
        <span id="divpr{{ i.id }}" class="divpr">
       <button id="pr{{ i.id }}" class="btn btn-danger cart" >Add to cart</button>
        </span>
            <a href="/shop/product/{{ i.id }}" ><button id="qv{{ i.id }}" class="btn btn-danger  " > View</button></a>

    </div>
  </div>
  </div>

{% endfor %}
 </div>
    <div class="container">
<h2 align="center"><i><u>Stylies Women's Sadi</u></i>  </h2>
     {% for i in products|slice:"56:64" %}

<div class='col-md-3'>
&nbsp
  <div class="card" style="width: 202px" >
    <img class="card-img-top" src="/media/{{ i.image }}" alt="Card image" style="width:200px;height: 160px;">
    <div class="card-body" style="background-color: blue;">
      <h3 class="card-title" id="namepr{{ i.id }}" ><b>{{ i.product_name }}</b></h3>
      <p class="card-text" style="color: white;">{{ i.desc|slice:"0:40" }} </p>
        <h6 class="card-title" style="color: black;">Price <span id="priipr{{ i.id }}"><b>{{ i.prii }}</b></span></h6>
        <span id="divpr{{ i.id }}" class="divpr">
       <button id="pr{{ i.id }}" class="btn btn-danger cart" >Add to cart</button>
        </span>
            <a href="/shop/product/{{ i.id }}" ><button id="qv{{ i.id }}" class="btn btn-danger  " > View</button></a>

    </div>
  </div>
  </div>

{% endfor %}
 </div>

    {% block  js %}


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

    <script>


    if (localStorage.getItem('cart')==null){
        var cart={};
    }
    else {
        cart=JSON.parse(localStorage.getItem('cart'));


         document.getElementById('cart').innerHTML=Object.keys(cart).length;


    }


    //$('.cart').click(function () {
        $('.divpr').on('click','button.cart',function(){


        var idstr=this.id.toString();

        if (cart[idstr] !=undefined){
            qty = cart[idstr][0] + 1;
             nam = document.getElementById('name' + idstr).innerHTML;
              price = document.getElementById('prii' +idstr).innerText;
            cart[idstr] = [qty,nam,parseInt(price)];


        }
        else {
             qty = 1;
            nam = document.getElementById('name' + idstr).innerHTML;
            price = document.getElementById('prii' +idstr).innerText;

            cart[idstr] = [qty,nam,parseInt(price)];
        }




        localStorage.setItem('cart',JSON.stringify(cart));
        document.getElementById('cart').innerHTML=Object.keys(cart).length;

          updatepop(cart);

    });



          $(function () {
  $('#pop').popover();
  updatepop(cart);

});


          function updatepop(cart) {
              console.log('update popover');
              var popstr = '';
              popstr = popstr + '<h5>cart for your items in your cart</h5><div class=" mx-2 my-4">';
              var i = 1;
              for (var item in cart) {
                  popstr = popstr + '<b>' + i + '</b>. ';
                  popstr = popstr + document.getElementById('name' + item).innerHTML.slice(0, 18) + '...Qty-' + cart[item][0] + '<br>';
                  i = i + 1;

              }
              popstr=popstr + "</div> <a href='/shop/checkout'><button class='btn btn-primary' id='checkout'>checkout</button></a> <button class='btn btn-primary' id='clearcart' onclick='clearcart()'>clearcart</button>"




                    document.getElementById('pop').setAttribute('data-content',popstr);
                        $(function () {

  $('#pop').popover('show');



});


          }

          function clearcart() {
              cart=JSON.parse(localStorage.getItem('cart'));
              for (var item in cart){
                  document.getElementById('div' + item).innerHTML='<button id="'+ item +'" class="btn btn-primary cart" >Add to cart</button>'
              }
              localStorage.clear();
              cart={};
              updatepop(cart);

          }
</script>

{% endblock %}

{% endblock %}



</body>
</html>